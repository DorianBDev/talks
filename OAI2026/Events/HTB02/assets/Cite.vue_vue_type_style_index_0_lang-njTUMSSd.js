import{d as F,r as c,K as N,f as t,o as i,i as r,t as u,T as b,F as w,aj as j}from"./modules/vue-nc2o2shR.js";import{c as o}from"./CiteEngine-CVzaD3Hf.js";import"./index-B3TdmGvl.js";import{u as D}from"./slidev/context-Cdg-e9oB.js";const K=["title"],L={key:1,class:"biblio_ref"},M={key:2,class:"biblio_foot"},O={class:"biblio_foot_elm"},T={key:0,class:"biblio_id"},V={key:1,class:"biblio_shortref"},$={key:2,class:"biblio_fullref"},H=F({__name:"Cite",props:{bref:{type:String,default:null},input:{type:String,default:null}},setup(C){var k;const{$slidev:S,$route:R,$frontmatter:d}=D(),m=R.no,p=C,v=c(""),s=c(""),h=c("");let l={...o.default_config,...(k=S.configs)==null?void 0:k.biblio,...d==null?void 0:d.biblio};const _=c(l.tooltips),f=B(),E=l.show_id||(f==="short"||l.numerical_ref)&&(l.show_id??!0);let g=o.add(p.bref,m,p.input);function B(){let e=l.footnotes;return e==!0&&(e="short"),e==!1&&(e="none"),e}function y(){if(!o.state.is_init)return;if(g==null){s.value="(#Noid)";return}const e=o.get(g);!("cite_id"in e)?(s.value="(#RefErr)",v.value=p.bref+": ERROR ref not found",_.value=!0):(s.value=e.cite_id,v.value=e.full_bib,_.value=l.tooltips);let n=o.get_allbibinpage(m);Math.min(...n[0])===e.idx&&(h.value=n[1].map(a=>o.get(a)).filter(a=>a==null?void 0:a.id))}return N(o.state.version,(e,x)=>{y()}),o.init().then(e=>{y()}),(e,x)=>(i(),t(w,null,[s.value&&_.value?(i(),t("a",{key:0,class:"biblio_tooltips",title:v.value},u(s.value),9,K)):r("v-if",!0),s.value&&!_.value?(i(),t("span",L,u(s.value),1)):r("v-if",!0),h.value!==""&&b(f)!="none"?(i(),t("div",M,[(i(!0),t(w,null,j(h.value,n=>(i(),t("li",O,[b(E)?(i(),t("span",T,u(n.cite_id)+" : ",1)):r("v-if",!0),b(f)==="short"?(i(),t("span",V,u(n.short_bib),1)):r("v-if",!0),b(f)==="full"?(i(),t("span",$,u(n.full_bib),1)):r("v-if",!0)]))),256))])):r("v-if",!0)],64))}});export{H as _};
